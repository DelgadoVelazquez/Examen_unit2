<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
        <div class="container">
            <div class="row">
                <div class="col"><!--Tendre el form-->
                    <form id="formulario">
                        <div class="mb-3">
                          <label for="numero1" class="form-label">numero1: </label>
                          <input name="numero1" type="number" class="form-control" id="numero1">
                        </div>
                        <div class="mb-3">
                            <label for="numero2" class="form-label">numero2: </label>
                            <input name="numero2" type="number" class="form-control" id="numero2" >
                        </div>
                        <button id="nuevo" type="button" class="btn btn-success">Nuevo registro</button>
                        <button type="submit" class="btn btn-primary">Registrar</button>
                      </form>
                </div>
                <div class="col"><!--Tendre la tabla-->
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Integrante</th>
                                <th>Matrícula</th>
                            </tr>
                        </thead>
                        <tbody id="contenido">
                            <!-- Llenar con JS -->
                        </tbody>
                    </table>
                </div>
            </div>
            <script>
                let i = 2;
                let nuevo = document.getElementById("nuevo"); // let  declara varibles que solo son accecibles desde su bloque
                nuevo.addEventListener("click", () => {
                    // Crear nuevos elementos para el form
                    let div = document.createElement("div");
                    div.setAttribute("class", "mb-3");
                    
                    let label_nombre = document.createElement("label");
                    label_nombre.setAttribute("for", "nombre" + i);
                    label_nombre.setAttribute("class", "form-label");
                    label_nombre.innerText = "Nombre " + i;
                    
                    let input_nombre = document.createElement("input");
                    input_nombre.setAttribute("name", "nombre" + i);
                    input_nombre.setAttribute("type", "text");
                    input_nombre.setAttribute("class", "form-control");
        
                    div.appendChild(label_nombre);
                    div.appendChild(input_nombre);
        
                    let label_matri = document.createElement("label");
                    label_matri.setAttribute("for", "matri" + i);
                    label_matri.setAttribute("class", "form-label");
                    label_matri.innerText = "Matrícula " + i;
        
                    let input_matri = document.createElement("input");
                    input_matri.setAttribute("name", "matri" + i);
                    input_matri.setAttribute("type", "text");
                    input_matri.setAttribute("class", "form-control");
        
                    div.appendChild(label_matri);
                    div.appendChild(input_matri);
        
                    document.getElementById("formulario").appendChild(div);
                    i++;
                });
            </script>
            <script>
                //Script para llenar la tabla de manera dinámica
                getParameter = (key) => {
                    let address = window.location.search;
                    let parameterList = new URLSearchParams(address);
                    return parameterList.get(key);
                }
        
                let nombre = getParameter("nombre");
                let matricula = getParameter("matri");
        
                // Pintar la información en la tabla
                function pintar(nombre, matri){
                    let tbody = document.getElementById("contenido");
                    let row = document.createElement("tr");
                    let celda1 = document.createElement("td");
                    let celda2 = document.createElement("td");
                    celda1.innerText = nombre;
                    celda2.innerText = matri;
                    row.appendChild(celda1);
                    row.appendChild(celda2);
                    tbody.appendChild(row);
                }
        
                let parameterList = new URLSearchParams(window.location.search);
                parameterList.forEach((value, key) => {
                    if (key.startsWith('nombre')) {
                        let matriKey = key.replace('nombre', 'matri');
                        let matriValue = parameterList.get(matriKey);
                        pintar(value, matriValue);
                    }
                });
            </script>




    
</body>
</html>